import{R as h,u as y,r as b,a as g,g as u,b as x,q as f,j as e,H as j,A as v}from"./index-Bbliq6wx.js";const p="https://bookit-backend-d4l7.onrender.com",N=n=>f({queryKey:["facility",n],queryFn:async({signal:c})=>{const a=u(),t=await fetch(`${p}/api/v1/facilities/${n}`,{method:"GET",signal:c,headers:{"Content-Type":"application/json",Authorization:a}});if(!t.ok)throw new Error("Facility not found");return t.json()}});function k(){const{id:n}=h.useParams(),c=y(),[a,t]=b.useState({available:!1,name:"",capacity:"",price:""}),l=g({mutationFn:async r=>{const s=await fetch(`${p}/api/v1/facilities/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:u()},body:JSON.stringify(r)}),d=await s.text();try{const i=JSON.parse(d);if(!s.ok)throw new Error(i?.message??`HTTP ${s.status}`);return i}catch(i){throw new Error(i instanceof Error?i.message:String(i))}},onSuccess:()=>{alert("Update facility successful!")},onError:r=>{console.error("Update facility failed:",r),alert("Update facility failed: "+(r?.message??String(r)))}}),m=async r=>{r.preventDefault();const s={name:a.name,price:a.price===""?0:parseFloat(a.price),capacity:a.capacity===""?0:parseInt(a.capacity,10),available:!!a.available};if(!s.name||s.price<=0||s.capacity<=0){alert("Please enter valid name, price and capacity.");return}try{await l.mutateAsync(s),c({to:"/admin/facilities"})}catch{}},o=x(N(n));return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(j,{isAdmin:!0}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("i",{className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6",children:[e.jsx(v,{className:"h-4 w-4"}),"Back to Dashboard"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2",children:"Add New Venue"}),e.jsx("p",{className:"text-muted-foreground",children:"Fill in the details to add a new venue to the system"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-border bg-card p-6",children:[e.jsx("h3",{className:"mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",children:"Facility Name *"}),e.jsx("input",{id:"name",placeholder:o.data.name,value:a.name,onChange:r=>t({...a,name:r.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg border border-border bg-input-background focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capacity",children:"Capacity (people) *"}),e.jsx("input",{id:"capacity",type:"number",placeholder:o.data.capacity,value:a.capacity,onChange:r=>t({...a,capacity:r.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg border border-border bg-input-background focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"price",children:"Price per Hour ($) *"}),e.jsx("input",{id:"price",type:"number",placeholder:o.data.price,value:a.price,onChange:r=>t({...a,price:r.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg border border-border bg-input-background focus:outline-none focus:ring-2 focus:ring-ring"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"available",type:"checkbox",checked:a.available,onChange:r=>t({...a,available:r.target.checked}),className:"h-4 w-4 accent-primary cursor-pointer"}),e.jsx("label",{className:"ms-2",htmlFor:"availability",children:"Availability *"})]})})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx("i",{children:e.jsx("button",{type:"button",className:"px-4 py-2 border border-border rounded-lg hover:bg-accent transition-colors",onClick:()=>c({to:"/admin/facilities"}),children:"Cancel"})}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90 transition-opacity",children:"Edit Venue"})]})]})]})]})}export{k as component};
